<!DOCTYPE html>
<html lang="ko" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title< /title>
        <link rel="icon"
            href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2218%22 fill=%22%2374C0FC%22/><text y=%2278%22 x=%2250%22 font-size=%2282%22 fill=%22white%22 font-family=%22sans-serif%22 font-weight=%22900%22 text-anchor=%22middle%22>あ</text></svg>">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link rel="stylesheet" href="style.css">
        <script src="gana.js"></script>
</head>

<body>
    <header class="header">
        <div class="header-left">
            <div class="ice-tab" id="modeSwitcher">
                <div class="tab-mover"></div>
                <div class="tab-item active" onclick="switchMode('hira')" id="hira-tab">히라가나</div>
                <div class="tab-item" onclick="switchMode('kata')" id="kata-tab">가타카나</div>
            </div>
            <div class="bookmark-status">
                <i class="fa-solid fa-bookmark icon-bookmark-mini"></i>
                <span id="bm-count-text">0/0</span>
            </div>
        </div>

        <div class="btn-group">
            <div class="ice-btn" id="flashBtn" onclick="toggleFlashMode(event)"><i class="fa-solid fa-eye"></i></div>

            <div class="ice-btn" onclick="togglePop(event, 'themePop')">
                <i class="fa-solid fa-circle-half-stroke"></i>
                <div id="themePop" class="ice-pop">
                    <div class="pop-row" onclick="setTheme('system')"><i class="fa-solid fa-desktop"></i> <span
                            id="theme-system">시스템 기본</span>
                        <div class="custom-chk" id="chk-t-system"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="setTheme('light')"><i class="fa-solid fa-sun"></i> <span
                            id="theme-light">라이트 모드</span>
                        <div class="custom-chk" id="chk-t-light"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="setTheme('dark')"><i class="fa-solid fa-moon"></i> <span
                            id="theme-dark">다크 모드</span>
                        <div class="custom-chk" id="chk-t-dark"><i class="fa-solid fa-check"></i></div>
                    </div>
                </div>
            </div>

            <div class="ice-btn" onclick="togglePop(event, 'setPop')">
                <i class="fa-solid fa-gear"></i>
                <div id="setPop" class="ice-pop">
                    <div class="pop-row" onclick="toggleSubPop(event, 'viewPop')"><i
                            class="fa-solid fa-display icon-view"></i> <span id="menu-view">보기 설정</span> <i
                            class="fa-solid fa-chevron-right pop-arrow"></i></div>
                    <div class="pop-row" onclick="toggleSubPop(event, 'voicePop')"><i
                            class="fa-solid fa-volume-high icon-voice"></i> <span id="menu-voice">음성 설정</span> <i
                            class="fa-solid fa-chevron-right pop-arrow"></i></div>
                    <div class="pop-row" onclick="toggleSubPop(event, 'flashPop')"><i class="fa-solid fa-bolt icon-feed"
                            style="color:var(--red)"></i> <span id="menu-flash">플래시 설정</span> <i
                            class="fa-solid fa-chevron-right pop-arrow"></i></div>
                    <div class="pop-row" onclick="toggleSubPop(event, 'secPop')"><i
                            class="fa-solid fa-layer-group icon-sec"></i> <span id="menu-sec">섹션 설정</span> <i
                            class="fa-solid fa-chevron-right pop-arrow"></i></div>
                    <div class="pop-row" onclick="toggleSubPop(event, 'langPop')"><i
                            class="fa-solid fa-globe icon-lang"></i> <span id="menu-lang">언어 변경</span> <i
                            class="fa-solid fa-chevron-right pop-arrow"></i></div>
                    <div class="pop-row" onclick="toggleSubPop(event, 'dataPop')"><i
                            class="fa-solid fa-database icon-data"></i> <span id="menu-data">데이터 관리</span> <i
                            class="fa-solid fa-chevron-right pop-arrow"></i></div>
                    <div class="pop-row" onclick="openFeedback()"><i class="fa-solid fa-comment-dots icon-feed"></i>
                        <span id="menu-feedback">피드백 및 제안</span>
                    </div>
                    <div class="ver-info">Gana Table v2.4.0 beta</div>
                </div>

                <div id="viewPop" class="ice-pop sub-pop">
                    <div class="pop-row" onclick="toggleViewSetting(event, 'enableBookmark')">
                        <i class="fa-solid fa-bookmark" style="color: var(--text-sub);"></i>
                        <span id="view-use-bm">북마크 사용</span>
                        <div class="custom-chk" id="chk-use-bm"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="toggleViewSetting(event, 'onlyBookmark')">
                        <i class="fa-solid fa-bookmark" style="color: var(--yellow);"></i>
                        <span id="view-bookmark">북마크만 보기</span>
                        <div class="custom-chk" id="chk-fav"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="toggleViewSetting(event, 'showKo')">
                        <i class="fa-solid fa-language" style="color: var(--blue);"></i>
                        <span id="view-ko">한글 발음 표시</span>
                        <div class="custom-chk" id="chk-ko"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="toggleViewSetting(event, 'showRuby')">
                        <i class="fa-solid fa-font" style="color: var(--purple);"></i>
                        <span id="view-ruby">대응 문자 표시</span>
                        <div class="custom-chk" id="chk-ruby"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-divider"></div>
                    <div class="pop-row" onclick="toggleViewSetting(event, 'compactView')">
                        <i class="fa-solid fa-compress" style="color: var(--text-sub);"></i>
                        <span id="view-compact">화면 축소(단축)</span>
                        <div class="custom-chk" id="chk-compact"><i class="fa-solid fa-check"></i></div>
                    </div>
                </div>

                <div id="voicePop" class="ice-pop sub-pop">
                    <div class="pop-row" onclick="toggleViewSetting(event, 'playOnClick')">
                        <i class="fa-solid fa-hand-pointer" style="color: var(--orange);"></i>
                        <span id="voice-click">클릭 시 재생</span>
                        <div class="custom-chk" id="chk-playclick"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="toggleViewSetting(event, 'playOnFlash')">
                        <i class="fa-solid fa-bolt-lightning" style="color: var(--red);"></i>
                        <span id="voice-flash">플래시 공개 시 재생</span>
                        <div class="custom-chk" id="chk-playflash"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-divider"></div>
                    <div class="pop-row" onclick="setVoiceSpeed(event, 1.0)">
                        <i class="fa-solid fa-gauge-high" style="color: var(--green);"></i>
                        <span id="voice-normal">보통 속도</span>
                        <div class="custom-chk" id="chk-v-normal"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="setVoiceSpeed(event, 0.7)">
                        <i class="fa-solid fa-gauge" style="color: var(--ice-point);"></i>
                        <span id="voice-slow">느리게 재생</span>
                        <div class="custom-chk" id="chk-v-slow"><i class="fa-solid fa-check"></i></div>
                    </div>
                </div>

                <div id="flashPop" class="ice-pop sub-pop">
                    <div class="pop-row" onclick="setFlashSpeed(event, 'fast')">
                        <i class="fa-solid fa-gauge-high" style="color: var(--red);"></i>
                        <span id="flash_speed_fast">빠르게</span>
                        <div class="custom-chk" id="chk-f-fast"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="setFlashSpeed(event, 'normal')">
                        <i class="fa-solid fa-gauge" style="color: var(--green);"></i>
                        <span id="flash_speed_normal">보통</span>
                        <div class="custom-chk" id="chk-f-normal"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="setFlashSpeed(event, 'slow')">
                        <i class="fa-solid fa-gauge-simple" style="color: var(--ice-point);"></i>
                        <span id="flash_speed_slow">느리게</span>
                        <div class="custom-chk" id="chk-f-slow"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-divider"></div>
                    <div class="pop-row" onclick="toggleFlashManual(event)">
                        <i class="fa-solid fa-hand-pointer" style="color: var(--purple);"></i>
                        <span id="flash_manual">수동 모드</span>
                        <div class="custom-chk" id="chk-f-manual"><i class="fa-solid fa-check"></i></div>
                    </div>
                </div>

                <div id="secPop" class="ice-pop sub-pop">
                    <div class="pop-row" onclick="toggleSec(event, 'base')"><i
                            class="fa-solid fa-font icon-sec-base"></i> <span id="sec-text-base">청음</span>
                        <div class="custom-chk" id="sec-base"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="toggleSec(event, 'daku')"><i
                            class="fa-solid fa-bullseye icon-sec-daku"></i> <span id="sec-text-daku">탁음</span>
                        <div class="custom-chk" id="sec-daku"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="toggleSec(event, 'yoon')"><i
                            class="fa-solid fa-wand-magic-sparkles icon-sec-yoon"></i> <span
                            id="sec-text-yoon">요음</span>
                        <div class="custom-chk" id="sec-yoon"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="toggleSec(event, 'soku')"><i
                            class="fa-solid fa-bolt icon-sec-soku"></i> <span id="sec-text-soku">촉음</span>
                        <div class="custom-chk" id="sec-soku"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="toggleSec(event, 'choo')"><i
                            class="fa-solid fa-ruler-horizontal icon-sec-choo"></i> <span id="sec-text-choo">장음</span>
                        <div class="custom-chk" id="sec-choo"><i class="fa-solid fa-check"></i></div>
                    </div>
                </div>

                <div id="langPop" class="ice-pop sub-pop">
                    <div class="pop-row" onclick="changeLang(event, 'ko')"><i class="fa-solid fa-mountain icon-ko"></i>
                        <span>한국어</span>
                        <div class="custom-chk" id="chk-l-ko"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="changeLang(event, 'ja')"><i
                            class="fa-solid fa-torii-gate icon-ja"></i> <span>日本語</span>
                        <div class="custom-chk" id="chk-l-ja"><i class="fa-solid fa-check"></i></div>
                    </div>
                    <div class="pop-row" onclick="changeLang(event, 'en')"><i class="fa-solid fa-flag-usa icon-en"></i>
                        <span>English</span>
                        <div class="custom-chk" id="chk-l-en"><i class="fa-solid fa-check"></i></div>
                    </div>
                </div>

                <div id="dataPop" class="ice-pop sub-pop">
                    <div class="pop-row" onclick="exportPart('settings')"><i
                            class="fa-solid fa-file-export icon-sec-base"></i> <span id="data-export-set">설정 백업</span>
                    </div>
                    <div class="pop-row" onclick="exportPart('bookmarks')"><i
                            class="fa-solid fa-bookmark icon-bookmark-mini"></i> <span id="data-export-bm">북마크 백업</span>
                    </div>
                    <div class="pop-row" onclick="exportPart('all')"><i
                            class="fa-solid fa-box-archive icon-sec-soku"></i> <span id="data-export-all">전체 백업</span>
                    </div>
                    <div class="pop-row" onclick="importData(event)"><i
                            class="fa-solid fa-file-import icon-sec-yoon"></i> <span id="data-import">데이터 복구</span>
                    </div>
                    <div class="pop-divider"></div>
                    <div class="pop-row danger" onclick="confirmReset(event, 'set')"><i class="fa-solid fa-sliders"></i>
                        <span id="data-reset-set">설정 초기화</span>
                    </div>
                    <div class="pop-row danger" onclick="confirmReset(event, 'bm')"><i class="fa-solid fa-eraser"></i>
                        <span id="data-reset-bm">북마크 초기화</span>
                    </div>
                    <div class="pop-row danger" onclick="confirmReset(event, 'all')"><i
                            class="fa-solid fa-triangle-exclamation"></i> <span id="data-reset-all">전체 초기화</span></div>
                </div>
            </div>
        </div>
    </header>

    <main class="container" id="mainContainer">
        <div id="emptyMsg" class="empty-msg"><i class="fa-solid fa-folder-open icon-empty"></i><br>표시할 내용이 없습니다.</div>
        <div id="wrap-base" class="section-wrap">
            <div class="section-title title-base" id="t-base"></div>
            <div id="grid-base" class="kana-grid"></div>
        </div>
        <div id="wrap-daku" class="section-wrap">
            <div class="section-title title-daku" id="t-daku"></div>
            <div id="grid-daku" class="kana-grid"></div>
        </div>
        <div id="wrap-yoon" class="section-wrap">
            <div class="section-title title-yoon" id="t-yoon"></div>
            <div id="grid-yoon" class="kana-grid grid-3"></div>
        </div>
        <div id="wrap-soku" class="section-wrap">
            <div class="section-title title-soku" id="t-soku"></div>
            <div id="grid-soku" class="kana-grid"></div>
        </div>
        <div id="wrap-choo" class="section-wrap">
            <div class="section-title title-choo" id="t-choo"></div>
            <div id="grid-choo" class="kana-grid"></div>
        </div>
    </main>

    <!-- 피드백 모달 -->
    <div class="modal-overlay" id="feedbackModal">
        <div class="modal feedback-modal">
            <h3 style="margin-bottom:15px;" id="fb-title">문의 및 피드백</h3>

            <div class="custom-select">
                <div class="select-trigger" onclick="toggleSelect(event)">
                    <span id="selected-val">
                        <i class="fa-solid fa-bug" style="color:var(--red); margin-right:8px;"></i><span
                            id="fb-type-text">버그 제보</span>
                    </span>
                    <i class="fa-solid fa-chevron-down"></i>
                </div>
                <div class="select-options" id="selectOptions">
                    <div class="option" onclick="selectType('bug')">
                        <i class="fa-solid fa-bug" style="color:var(--red)"></i> <span id="fb-opt-bug">버그 제보</span>
                    </div>
                    <div class="option" onclick="selectType('feedback')">
                        <i class="fa-solid fa-comment-dots" style="color:var(--yellow)"></i> <span
                            id="fb-opt-feedback">피드백</span>
                    </div>
                    <div class="option" onclick="selectType('suggest')">
                        <i class="fa-solid fa-lightbulb" style="color:var(--blue)"></i> <span id="fb-opt-suggest">기능
                            제안</span>
                    </div>
                </div>
            </div>

            <div id="feedbackContent">
                <input type="text" id="fb-subject" class="ice-input" placeholder="제목을 입력하세요">

                <div id="fb-star-wrap" style="display:none; margin: 15px 0;">
                    <div class="stars">
                        <i class="fa-solid fa-star star active" onclick="setStar(1)"></i>
                        <i class="fa-solid fa-star star active" onclick="setStar(2)"></i>
                        <i class="fa-solid fa-star star active" onclick="setStar(3)"></i>
                        <i class="fa-solid fa-star star active" onclick="setStar(4)"></i>
                        <i class="fa-solid fa-star star active" onclick="setStar(5)"></i>
                    </div>
                </div>

                <textarea id="fb-message" class="ice-input scroll-fixed" rows="6" placeholder="내용을 입력하세요"></textarea>
            </div>

            <div style="display:flex; gap:10px; margin-top:20px;">
                <button class="btn-cancel" onclick="closeFeedback()" id="fb-cancel">취소</button>
                <button class="btn-confirm" onclick="sendFeedback()" id="fb-send">전송</button>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="language.js"></script>
    <script src="script.js"></script>
</body>

</html>
